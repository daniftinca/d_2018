<button mat-raised-button color="primary" style="margin: 30px 0;" (click)="openAddBug()">
  <i class="material-icons">bug_report</i> {{ 'addBug.buttonAddBug' | translate}}
</button>

<div class="list-bugs-page">
  <div class="bugs-controls">

    <div class="filters">
      <h3>Filter</h3>
      <form
        #filterForm
        onsubmit="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)">
        <mat-form-field>
          <input
            matInput
            #titleElement
            placeholder="Filter by Title"
            (change)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)"
          >
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            #descriptionElement
            (change)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)"
            placeholder="Filter by Description">
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            #statusElement
            (change)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)"
            placeholder="Filter by Status">
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            #severityElement
            (change)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value)"
            placeholder="Filter by Severity">
        </mat-form-field>
      </form>
    </div>
    <div class="bug-sorts">
      <h3>Sort by</h3>
      <mat-checkbox #sortElementTitle (change)="toggleSort('title', sortElementTitle.checked)">Title</mat-checkbox>


    </div>
  </div>
  <div class="bug-table">
    <table mat-table [dataSource]="bugList" class="mat-elevation-z8">


      <ng-container matColumnDef="number">
        <th mat-header-cell *matHeaderCellDef> Number</th>
        <td mat-cell *matCellDef="let element"> {{element.id}}</td>

      </ng-container>
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef> Title</th>
        <td mat-cell *matCellDef="let element">
          <button mat-stroked-button color="primary" (click)="openDialog(element)">
            {{element.title}}
          </button>

        </td>

      </ng-container>
      <ng-container matColumnDef="version">
        <th mat-header-cell *matHeaderCellDef> Version</th>
        <td mat-cell *matCellDef="let element"> {{element.version}}</td>

      </ng-container>

      <ng-container matColumnDef="targetDate">
        <th mat-header-cell *matHeaderCellDef> Target Date</th>
        <td mat-cell *matCellDef="let element"> {{getDate(element.targetDate).toDateString()}}</td>
      </ng-container>


      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let element"> {{element.status}}</td>
      </ng-container>

      <ng-container matColumnDef="fixedVersion">
        <th mat-header-cell *matHeaderCellDef>FixedVersion</th>
        <td mat-cell *matCellDef="let element"> {{element.fixedVersion}}</td>
      </ng-container>

      <ng-container matColumnDef="severity">
        <th mat-header-cell *matHeaderCellDef>Severity</th>
        <td mat-cell *matCellDef="let element"> {{element.severity}}</td>
      </ng-container>

      <ng-container matColumnDef="createdBy">
        <th mat-header-cell *matHeaderCellDef>Created By</th>
        <td mat-cell *matCellDef="let element"> {{element.createdByUser.username}}</td>
      </ng-container>

      <ng-container matColumnDef="assignedTo">
        <th mat-header-cell *matHeaderCellDef>Assigned To</th>
        <td mat-cell *matCellDef="let element"> {{element.assignedTo.username}}</td>
      </ng-container>

      <ng-container matColumnDef="exportExcel">
        <th mat-header-cell *matHeaderCellDef>
          <button mat-raised-button color="primary" (click)="downloadExcel()">Export Excel</button>
        </th>
        <td mat-cell *matCellDef="let element">
          <mat-checkbox #excelElem (change)="onChangeCheck(element, excelElem.checked)"></mat-checkbox>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;">

      </tr>
    </table>
    <mat-paginator
      [length]="length"
      [pageSize]="pageSize"
      (page)="filter(titleElement.value,descriptionElement.value,statusElement.value,severityElement.value,$event.pageIndex*$event.pageSize,$event.pageSize)"
    >
    </mat-paginator>
  </div>
</div>
